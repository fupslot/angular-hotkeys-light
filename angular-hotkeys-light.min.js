window.angular.module("fps.hotkeys",[]).service("Hotkeys",["$Hotkeys",function(e){return new e}]).provider("$Hotkeys",function(){function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=this.KEY_CODES={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",191:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"};this.$get=["$rootScope","$window",function(o,e){var t=function(e){this.id=e.id||n(),this.key=e.key,this.context=e.context||null,this.callback=e.callback,this.args=e.args,this.onKeyUp=e.onKeyUp||!1};t.prototype.clone=function(){return new t(this)};var r=function(){this._hotkeys={},this._hotkeysUp={},this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this.initialize()};return Object.defineProperty(r.prototype,"initialize",{value:function(){e.addEventListener("keydown",this._onKeydown,!0),e.addEventListener("keyup",this._onKeyup,!0)}}),Object.defineProperty(r.prototype,"_invokeHotkeyHandlers",{value:function(e,t,r){for(var o=0,n=r.length;o<n;o++)try{var i=r[o];i.callback.call(i.context,e,i.args)}catch(e){console.error("HotKeys: ",i.key,e.message)}}}),Object.defineProperty(r.prototype,"_onKeydown",{value:function(e){var t=this.keyStringFromEvent(e);this._hotkeys[t]&&this._invokeHotkeyHandlers(e,t,this._hotkeys[t])},writable:!0}),Object.defineProperty(r.prototype,"_onKeyup",{value:function(e){var t=this.keyStringFromEvent(e);this._hotkeysUp[t]&&this._invokeHotkeyHandlers(e,t,this._hotkeysUp[t])},writable:!0}),Object.defineProperty(r.prototype,"keyStringFromEvent",{value:function(e){var t=[],r=e.which;return r=s[r]?s[r]:String.fromCharCode(r).toLowerCase(),e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t.push(r),function(e){for(var t={},r=[],o=0;o<e.length;++o)t[e[o]]||r.push(e[o]),t[e[o]]=!0;return r}(t).join("+")}}),Object.defineProperty(r.prototype,"_deregisterHotkey",{value:function(e){var t,r=this._hotkeys;if(e.onKeyUp&&(r=this._hotkeysUp),r[e.key])for(var o=r[e.key],n=0;n<o.length;++n){var i=o[n];(e.callback===i.callback&&i.context===e.context||e.id===i.id)&&(t=o.splice(n,1))}return t}}),Object.defineProperty(r.prototype,"deregisterHotkey",{value:function(e){var t=[];if(this._validateHotkey(e),i(e.key))for(var r=e.key.length-1;0<=r;r--){var o=e.clone();o.key=e.key[r];var n=this._deregisterHotkey(o);void 0!==n&&t.push(n[0])}else t.push(this._deregisterHotkey(e));return t}}),Object.defineProperty(r.prototype,"_validateHotkey",{value:function(e){if(!(e instanceof t))throw new TypeError("Hotkeys: Expected a hotkey object be instance of HotKey")}}),Object.defineProperty(r.prototype,"_registerKey",{value:function(e){var t=this._hotkeys;return e.onKeyUp&&(t=this._hotkeysUp),t[e.key]=t[e.key]||[],t[e.key].push(e),e}}),Object.defineProperty(r.prototype,"_registerKeys",{value:function(e){var t=[];if(i(e.key))for(var r=e.key.length-1;0<=r;r--){var o=e.clone();o.id=n(),o.key=e.key[r],t.push(this._registerKey(o))}else t.push(this._registerKey(e));return t}}),Object.defineProperty(r.prototype,"registerHotkey",{value:function(e){return this._validateHotkey(e),this._registerKeys(e)}}),Object.defineProperty(r.prototype,"registerHotkeyUp",{value:function(e){this._validateHotkey(e),e.onKeyUp=!0,this._registerKeys(e)}}),Object.defineProperty(r.prototype,"createHotkey",{value:function(e){if(null===e.key||void 0===e.key)throw new TypeError('HotKeys: Argument "key" is required');if(null===e.callback||void 0===e.callback)throw new TypeError('HotKeys: Argument "callback" is required');var r;return e.callback=(r=e.callback,function(e,t){o.$apply(function(){r.call(this,e,t)}.bind(this))}),new t(e)}}),Object.defineProperty(r.prototype,"match",{value:function(e,t){i(t)||(t=[t]);var r=this.keyStringFromEvent(e);return Boolean(~t.indexOf(r))}}),r}]});
//# sourceMappingURL=angular-hotkeys-light.min.js.map